#!/bin/bash -ex

git clone --depth 1 https://github.com/serpilliere/elfesteem.git
git clone --depth 1 https://github.com/cea-sec/miasm.git

if which llvm-config-3.9 2>&1 >/dev/null; then
    export LLVM_CONFIG=$(which llvm-config-3.9)
    ctf-tools-pip install -U enum34 "llvmlite==0.16"
elif which llvm-config-3.8 2>&1 >/dev/null; then
    export LLVM_CONFIG=$(which llvm-config-3.8)
    ctf-tools-pip install -U enum34 "llvmlite==0.15"
fi

ctf-tools-pip install -e elfesteem
ctf-tools-pip install -e miasm
